(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports=a(382)},187:function(e,t,a){},199:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(175),c=a.n(s),i=(a(187),a(10)),u=a(11),o=a(13),l=a(12),m=a(14),p=a(7),d=a(386),h=a(388),f=a(387),E=a(178),b=a.n(E),v=a(384),g=function(){return r.a.createElement("div",null,"404 - ",r.a.createElement(v.a,{to:"/"},"Go home"))},O=a(179),y=a.n(O),N=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box-layout"},r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"box-layout__title"},"Chat Group 545"),r.a.createElement("p",null,"WELLCOME"),r.a.createElement("button",{className:"login-button",onClick:this.props.startLogin},"Login with Google")))}}]),t}(r.a.Component),j=Object(p.b)(null,function(e){return{startLogin:function(){return e(function(e,t,a){var n=a();return n.login({provider:"google",type:"popup"}).then(function(e){var t=e.user;n.database().ref("users/".concat(t.uid,"/uid")).set(t.uid),n.database().ref("users/".concat(t.uid,"/active")).set(!0)})})}}})(N),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).userOnClick=function(){a.props.handleOnClick(a.props.user)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"contact",onClick:function(){return e.userOnClick()}},r.a.createElement("div",{className:"wrap"},r.a.createElement("span",{className:this.props.user.active?"contact-status online":"contact-status"}),r.a.createElement("img",{src:this.props.user.avatarUrl,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("p",{className:"name"},this.props.user.displayName),r.a.createElement("p",{className:"preview"},this.props.user.active?"online":this.props.user.lastTime))))}}]),t}(r.a.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).createUserComponent=function(){var e=[];return a.props.users.forEach(function(t){e.push(r.a.createElement(w,{key:t.uid,user:t,handleOnClick:a.props.handleOnClick}))}),e},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.startUsersList()}},{key:"render",value:function(){return r.a.createElement("div",{id:"contacts"},r.a.createElement("ul",null,this.createUserComponent()))}}]),t}(r.a.Component),k=Object(p.b)(function(e){return{auth:e.auth,users:e.users}},function(e){return{startUsersList:function(){return e(function(e,t,a){return a().database().ref("users").on("value",function(t){var a=[];return t.forEach(function(e){a.push(e.toJSON())}),e(function(e){return{type:"USERS_LIST",users:e}}(a))})})}}})(C),S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.mess.uid===this.props.auth.uid;return r.a.createElement("li",{className:e?"sent":"replies"},r.a.createElement("img",{src:e?this.props.auth.photo:this.props.user.photo,alt:""}),r.a.createElement("p",null,this.props.mess.text))}}]),t}(r.a.Component),A=(a(110),function(e,t){return{type:"USER_CHANGE",user:e,list:t}}),L=function(e){return function(t,a,n){var r,s=a().auth,c=n();r=s.uid>e?s.uid+e:e+s.uid,c.database().ref("messages/".concat(r)).limitToLast(1).on("child_added",function(e){t({type:"MESSAGES_CHANGE",mess:e.toJSON()})})}},U=function(e){return function(t,a,n){var r,s=a().auth,c=n();r=s.uid>e?s.uid+e:e+s.uid,c.database().ref("messages/".concat(r)).off()}},_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){e.preventDefault();var t=e.target.message.value;t.trim()?(a.props.sendMessage(a.props.user.uid,t),e.target.reset()):e.target.submit.diabled=!0},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"auto"})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=[];return this.props.mess.list.forEach(function(a){t.push(r.a.createElement(S,{mess:a,auth:e.props.auth,user:e.props.user}))}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"contact-profile"},r.a.createElement("img",{src:this.props.user?this.props.user.avatarUrl:"",alt:""}),r.a.createElement("p",null,this.props.user?this.props.user.displayName:""),r.a.createElement("div",{className:"social-media"},r.a.createElement("i",{className:"fa fa-facebook","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-instagram","aria-hidden":"true"}))),r.a.createElement("div",{className:"messages"},r.a.createElement("ul",null,t),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),r.a.createElement("div",{className:"message-input"},r.a.createElement("div",{className:"wrap"},r.a.createElement("form",{onSubmit:this.onSubmit,autoComplete:"off"},r.a.createElement("input",{type:"text",name:"message",placeholder:"Write your message..."}),r.a.createElement("i",{className:"fa fa-paperclip attachment","aria-hidden":"true"}),r.a.createElement("button",{name:"submit",className:"submit"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}))))))}}]),t}(r.a.Component),G=Object(p.b)(function(e){return{auth:e.auth,user:e.messages.user,mess:e.messages}},function(e){return{sendMessage:function(t,a){return e(function(e,t){return function(a,n,r){var s=n().auth;if(s){var c,i=s.uid,u={uid:i,text:t};return c=i>e?i+e:e+i,r().database().ref("messages/".concat(c)).push(u)}}}(t,a))},startListening:function(t){return e(L(t))}}})(_),x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleOnClick=function(e){a.props.startUserChange(e)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.auth;return r.a.createElement("div",{id:"frame"},r.a.createElement("div",{id:"sidepanel"},r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"wrap"},r.a.createElement("img",{id:"profile-img",src:e.avatarUrl,className:"online",alt:""}),r.a.createElement("p",null,e.displayName),r.a.createElement("i",{className:"fa fa-chevron-down expand-button","aria-hidden":"true"}),r.a.createElement("div",{id:"status-options"},r.a.createElement("ul",null,r.a.createElement("li",{id:"status-online",className:"active"},r.a.createElement("span",{className:"status-circle"}),r.a.createElement("p",null,"Online")),r.a.createElement("li",{id:"status-away"},r.a.createElement("span",{className:"status-circle"}),r.a.createElement("p",null,"Away")),r.a.createElement("li",{id:"status-busy"},r.a.createElement("span",{className:"status-circle"}),r.a.createElement("p",null,"Busy")),r.a.createElement("li",{id:"status-offline"},r.a.createElement("span",{className:"status-circle"}),r.a.createElement("p",null,"Offline")))))),r.a.createElement("div",{id:"search"},r.a.createElement("label",{htmlFor:""},r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})),r.a.createElement("input",{type:"text",placeholder:"Search contacts..."})),r.a.createElement(k,{handleOnClick:this.handleOnClick})),r.a.createElement(G,null))}}]),t}(r.a.Component),T=Object(p.b)(function(e){return{auth:e.auth,user:e.messages.user}},function(e){return{startUserChange:function(t){return e((a=t,function(e,t,n){t().messages.user&&e(U(t().messages.user.uid));var r,s=n(),c=t().auth;return r=c.uid>a.uid?c.uid+a.uid:a.uid+c.uid,s.database().ref("messages/".concat(r)).once("value",function(t){if(t.val()){var n=[];t.forEach(function(e){n.push(e.toJSON())}),n.pop(),e(A(a,n))}else e(A(a,[]));e(L(a.uid))})}));var a}}})(x),I=a(69),M=a(385),R=Object(p.b)(void 0,function(e){return{startLogout:function(){return e(function(e,t,a){var n=t().auth,r=a().database();return r.ref("users/".concat(n.uid,"/active")).set(!1),r.ref("users/".concat(n.uid,"/lastTime")).set(y()(Date(),"yyyy/dd/mm HH:MM")),a().auth().signOut()})}}})(function(e){var t=e.startLogout;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"header__content"},r.a.createElement(v.a,{className:"header__title",to:"/join"},r.a.createElement("h1",null,"Chat Group 545")),r.a.createElement("button",{className:"button button--link",onClick:t},"Logout"))))}),W=Object(p.b)(function(e){return{isAuthenticated:!!e.auth.uid}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(I.a)(e,["isAuthenticated","component"]);return r.a.createElement(f.a,Object.assign({},n,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement("div",null,r.a.createElement(a,e))):r.a.createElement(M.a,{to:"/"})}}))}),B=Object(p.b)(function(e){return{isAuthenticated:!!e.auth.uid}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(I.a)(e,["isAuthenticated","component"]);return r.a.createElement(f.a,Object.assign({},n,{component:function(e){return t?r.a.createElement(M.a,{to:"/home"}):r.a.createElement(a,e)}}))}),H=b()(),J=function(){return r.a.createElement(d.a,{history:H},r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(B,{path:"/",component:j,exact:!0}),r.a.createElement(W,{path:"/home",component:T}),r.a.createElement(f.a,{component:g}))))},z=(a(197),a(199),a(201),a(26)),D=a(70),F=a(68),K=a.n(F),P=a(180),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid,displayName:t.name,avatarUrl:t.photo};case"LOGOUT":return{};default:return e}},$=[],q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LIST":var a=[];return t.users&&(a=t.users),a;default:return e}},Q=a(181),X=(a(381),{user:{uid:null,displayName:"Chat With Ghost",avatarUrl:"http://icons.iconarchive.com/icons/google/noto-emoji-smileys/512/10100-ghost-icon.png"},list:[]}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_CHANGE":return{user:e.user,list:Object(Q.a)(e.list).concat([t.mess])};case"USER_CHANGE":return t.list?{user:t.user,list:t.list}:{user:t.user,list:[]};default:return e}},Z={apiKey:"AIzaSyA9bkol6af0Wz-ozhS78n2TOs3LNya8xGg",authDomain:"chat-group-18857.firebaseapp.com",databaseURL:"https://chat-group-18857.firebaseio.com",projectId:"chat-group-18857",storageBucket:"chat-group-18857.appspot.com",messagingSenderId:"660645655047"},ee={userProfile:"users",firebaseStateName:"firebase"};var te=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],K.a.initializeApp(Z),Object(z.d)(Object(D.reactReduxFirebase)(K.a,ee),Object(z.a)(P.a.withExtraArgument(D.getFirebase)))(z.e)(Object(z.c)({firebase:D.firebaseReducer,auth:V,users:q,messages:Y}))}(window.__INITIAL_STATE__);K.a.auth().onAuthStateChanged(function(e){if(e){var t=e.displayName?e.displayName:e.email;te.dispatch(function(e,t,a){return{type:"LOGIN",uid:e,name:t,photo:a}}(e.uid,t,e.photoURL)),"/"===H.location.pathname&&H.push("/home")}else te.dispatch({type:"LOGOUT"}),H.push("/")});var ae=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:te},r.a.createElement(J,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[182,2,1]]]);
//# sourceMappingURL=main.31a5978d.chunk.js.map